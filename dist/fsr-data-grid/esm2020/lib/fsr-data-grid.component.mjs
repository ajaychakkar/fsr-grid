import { DOCUMENT } from '@angular/common';
import { Component, ContentChild, ContentChildren, EventEmitter, Inject, Input, Output, ViewChildren } from '@angular/core';
import * as _ from 'lodash';
import { DraggableDirective } from './directives/draggable.directive';
import { GridColumnDirective } from './directives/grid-column.directive';
import { RowExpandableDirective } from './directives/row-expandable.directive';
import { GridColumnComponent } from './grid-column/grid-column.component';
import * as i0 from "@angular/core";
import * as i1 from "./fsr-data-grid.service";
import * as i2 from "@angular/common";
import * as i3 from "@angular/forms";
import * as i4 from "./grid-column/grid-column.component";
import * as i5 from "./grid-row/grid-row.component";
import * as i6 from "./directives/resizable.directive";
import * as i7 from "./directives/draggable.directive";
const checkboxSelectionWidth = 30;
const rowExpandableWidth = 30;
export class FsrDataGridComponent {
    constructor(element, fsrDataGridService, document) {
        this.fsrDataGridService = fsrDataGridService;
        this.document = document;
        // All output events
        this.onGridReady = new EventEmitter();
        this.onRowClick = new EventEmitter();
        this.selectAllRowsChanged = new EventEmitter();
        this.rowSelectionChanged = new EventEmitter();
        this.columnResized = new EventEmitter();
        this.columnResizeEnd = new EventEmitter();
        this.rowExpandableEvent = new EventEmitter();
        this.filterChanged = new EventEmitter();
        this.sortChanged = new EventEmitter();
        this.columnReorder = new EventEmitter();
        this._gridOptions = {
            rowSelection: true,
            rowExpandable: false
        };
        this._rows = [];
        this._columnDefs = [];
        this.visibleColumns = [];
        this.selectAllRows = false;
        this.expandAllRows = false;
        this.leftPinnedColumns = [];
        this.rightPinnedColumns = [];
        this.viewPortColumns = [];
        this.viewPort = {};
        this.loadingData = true;
        this.positions = {};
        this.draggableColumnsOrder = [];
        this.element = element.nativeElement;
    }
    set ColumnDefs(defs) {
        this._columnDefs = defs;
        this.setGridColumns();
    }
    set data(_data) {
        this.setGridRows(_data);
    }
    set gridOptions(gridOptions) {
        _.extend(this._gridOptions, gridOptions);
    }
    set columnTemplates(templates) {
        this._columnTemplates = templates;
        this.translateToColumns(templates);
    }
    ngAfterViewInit() {
        this.calculateColumnsWidth();
    }
    ngOnInit() {
        this.onGridReady.emit({
            api: this
        });
    }
    setGridRows(data) {
        this._rows = [];
        data.forEach((d) => {
            this._rows.push({
                data: d,
                isSelected: false,
                isExpanded: false
            });
        });
    }
    setGridColumns() {
        this.visibleColumns = this._columnDefs.filter((column) => {
            return column.visible;
        });
        this.calculateColumnsWidth();
    }
    calculateColumnsWidth() {
        let viewportWidth = this.viewPort.width;
        if (this._gridOptions.rowSelection) {
            viewportWidth -= checkboxSelectionWidth;
        }
        if (this._gridOptions.rowExpandable) {
            viewportWidth -= rowExpandableWidth;
        }
        this.visibleColumns.forEach((column) => {
            if (!column.$$width) {
                column.$$width = this._getColumnWidth(column, viewportWidth);
            }
        });
        this.separateColumnsByPin();
    }
    separateColumnsByPin() {
        this.leftPinnedColumns = this.visibleColumns.filter((column) => {
            return column.pinnedColumn === 'LEFT';
        });
        this.viewPortColumns = this.visibleColumns.filter((column) => {
            return column.pinnedColumn !== 'RIGHT' && column.pinnedColumn !== 'LEFT';
        });
        if (this.draggableColumnsOrder.length === 0) {
            this.draggableColumnsOrder = this.viewPortColumns.map((col) => col.key);
        }
        this.orderViewportColumns();
        this.rightPinnedColumns = this.visibleColumns.filter((column) => {
            return column.pinnedColumn === 'RIGHT';
        });
        this.calculateViewportWidth();
    }
    orderViewportColumns() {
        this.viewPortColumns.sort((a, b) => this.draggableColumnsOrder.indexOf(a.key) - this.draggableColumnsOrder.indexOf(b.key));
    }
    calculateViewportWidth() {
        this.viewPort = this.element.getElementsByClassName('fsr-grid-wrapper')[0].getBoundingClientRect();
    }
    _getColumnWidth(column, viewportWidth) {
        let _defaultColWidth = viewportWidth / this.visibleColumns.length;
        let colWidth = _defaultColWidth;
        if (column.width) {
            if (typeof (column.width) === 'string' && column.width.indexOf('%') !== -1) {
                colWidth = viewportWidth * (parseFloat(column.width) / 100);
            }
            else {
                colWidth = parseInt(column.width);
            }
        }
        return colWidth;
    }
    translateToColumns(templates) {
        if (templates) {
        }
    }
    onWidthResize(event, column) {
        column.$$width = event;
        this.columnResized.emit({
            column: column
        });
    }
    onWidthResizeEnd(event, column) {
        column.$$width = event;
        this.columnResizeEnd.emit({
            column: column
        });
    }
    onRowClicked(rowData) {
        this.onRowClick.emit(rowData);
    }
    selectAll(event) {
        if (this.selectAllRows) {
            this._rows.forEach((row) => {
                row.isSelected = true;
            });
        }
        else {
            this._rows.forEach((row) => {
                row.isSelected = false;
            });
        }
        this.selectAllRowsChanged.emit({
            selected: this.selectAllRows,
            event: event
        });
    }
    getAllSelectedRows() {
        return (this._rows.filter((row) => {
            return row.isSelected;
        })).map((r) => r.data);
    }
    getVisibleColumns() {
        return [...this.leftPinnedColumns, ...this.viewPortColumns, ...this.rightPinnedColumns];
    }
    setColumnVisible(columns) {
        for (var i = 0; i < columns.length; i++) {
            let _index = this._columnDefs.findIndex((column) => column.key === columns[i].column);
            if (_index !== -1) {
                this._columnDefs[_index].visible = columns[i].visibility;
            }
        }
        this.setGridColumns();
    }
    expandCollapseAllRows() {
        this.expandAllRows = !this.expandAllRows;
        this._rows.forEach((row) => {
            row.isExpanded = this.expandAllRows;
        });
        this.rowExpandableEvent.emit({
            expandType: 'ALL',
            expanded: this.expandAllRows,
            data: this._rows
        });
    }
    onRowExpandCollapse(row) {
        row.isExpanded = !row.isExpanded;
        this.rowExpandableEvent.emit({
            expandType: 'SINGLE',
            expanded: row.isExpanded,
            data: row.data
        });
    }
    rowSelectionChange(event, row) {
        this.rowSelectionChanged.emit({
            data: row.data,
            event: event,
            selected: row.isSelected
        });
    }
    onColumnFilterChanged(event) {
        this.filterChanged.emit(event);
    }
    getFilteredColumns() {
        let filters = [];
        if (this.gridColumns) {
            this.gridColumns.toArray().forEach((column) => {
                const filterData = column.getFilterValue();
                if (filterData.value) {
                    filters.push(filterData);
                }
            });
        }
        return filters;
    }
    getSortedColumns() {
        let filters = [];
        if (this.gridColumns) {
            this.gridColumns.toArray().forEach((column) => {
                const filterData = column.getSortStatus();
                if (filterData) {
                    filters.push(filterData);
                }
            });
        }
        return filters;
    }
    columnSortChanged($event) {
        this.sortChanged.emit($event);
    }
    setGridData(data) {
        this.setGridRows(data);
        this.loadingData = false;
    }
    columnDragStart(event) {
        this.positions = {};
        let i = 0;
        for (const column of this.gridColumns.toArray()) {
            const elm = column.element;
            const left = parseInt(elm.offsetLeft.toString(), 0);
            this.positions[column.colDef.key] = {
                left,
                right: left + parseInt(elm.offsetWidth.toString(), 0),
                index: i++,
                element: elm
            };
        }
    }
    columnDragging(event) {
    }
    columnDragEnd(event) {
        const prevPos = this.positions[event.column.key];
        event.column.$$dragging = false;
        const target = this.isTarget(event.column, event.event);
        if (target) {
            this.reorderColumns(prevPos.index, target.i);
            this.columnReorder.emit({
                column: event.column,
                event: event.event,
                newPos: target.i,
                prevPos: prevPos.index
            });
        }
        event.element.style.left = 'auto';
    }
    reorderColumns(prevIndex, newIndex) {
        let dragColumn = this.draggableColumnsOrder[prevIndex];
        this.draggableColumnsOrder.splice(prevIndex, 1);
        this.draggableColumnsOrder.splice(newIndex, 0, dragColumn);
        this.orderViewportColumns();
    }
    isTarget(column, event) {
        let i = 0;
        const x = event.x || event.clientX;
        const y = event.y || event.clientY;
        const targets = this.document.elementsFromPoint(x, y);
        for (const key in this.positions) {
            const pos = this.positions[key];
            if (column.key !== key && targets.find((el) => el === pos.element)) {
                return { pos, i };
            }
            i++;
        }
    }
    resetColumns() {
        this.draggableColumnsOrder = [];
    }
}
FsrDataGridComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.2.11", ngImport: i0, type: FsrDataGridComponent, deps: [{ token: i0.ElementRef }, { token: i1.FsrDataGridService }, { token: DOCUMENT }], target: i0.ɵɵFactoryTarget.Component });
FsrDataGridComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.2.11", type: FsrDataGridComponent, selector: "fsr-data-grid", inputs: { ColumnDefs: "ColumnDefs", data: "data", gridOptions: "gridOptions" }, outputs: { onGridReady: "onGridReady", onRowClick: "onRowClick", selectAllRowsChanged: "selectAllRowsChanged", rowSelectionChanged: "rowSelectionChanged", columnResized: "columnResized", columnResizeEnd: "columnResizeEnd", rowExpandableEvent: "rowExpandableEvent", filterChanged: "filterChanged", sortChanged: "sortChanged", columnReorder: "columnReorder" }, queries: [{ propertyName: "expandableDetail", first: true, predicate: RowExpandableDirective, descendants: true }, { propertyName: "columnTemplates", predicate: GridColumnDirective }, { propertyName: "draggables", predicate: DraggableDirective, descendants: true }], viewQueries: [{ propertyName: "gridColumns", predicate: GridColumnComponent, descendants: true }], ngImport: i0, template: "<div class=\"fsr-grid-wrapper\">\n  <div class=\"fsr-grid-body-wrapper\" *ngIf=\"_columnDefs.length > 0\">\n    <!-- Left pinned container -->\n    <div class=\"fsr-left-pinned-container\">\n      <div class=\"fsr-header-row\">\n        <div class=\"fsr-header-rows-action-container\" *ngIf=\"_gridOptions.rowExpandable || _gridOptions.rowSelection\">\n          <div *ngIf=\"_gridOptions.rowExpandable\" (click)=\"expandCollapseAllRows()\" class=\"actionable\">\n            <i class=\"fa fa-light {{ expandAllRows ? 'fa-chevron-down' : 'fa-chevron-right'}} font-size-12px\"></i>\n          </div>\n          <div *ngIf=\"_gridOptions.rowSelection\" class=\"actionable\">\n            <input type=\"checkbox\" [(ngModel)]=\"selectAllRows\" (change)=\"selectAll($event)\"\n              class=\"form-control-xs align-middle\">\n          </div>\n        </div>\n        <fsr-grid-column *ngFor=\"let column of leftPinnedColumns\" [colDef]=\"column\" fsrResizable\n          [ngStyle]=\"{'width': column.$$width +'px'}\" [resizable]=\"column.resizable!\"\n          (onResize)=\"onWidthResize($event, column)\" (onResizeEnd)=\"onWidthResizeEnd($event, column)\"\n          (columnFilterChanged)=\"onColumnFilterChanged($event)\" (columnSortChanged)=\"columnSortChanged($event)\">\n        </fsr-grid-column>\n      </div>\n      <div class=\"fsr-viewport-rows\">\n        <div *ngFor=\"let row of _rows\">\n          <div class=\"fsr-viewport-row-data\">\n            <div class=\"fsr-viewport-rows-action-container\"  *ngIf=\"_gridOptions.rowExpandable || _gridOptions.rowSelection\">\n              <div *ngIf=\"_gridOptions.rowExpandable\" class=\"actionable\" (click)=\"onRowExpandCollapse(row)\">\n                <i class=\"fa fa-light {{ row.isExpanded ? 'fa-chevron-down' : 'fa-chevron-right'}} font-size-12px\"></i>\n              </div>\n              <div *ngIf=\"_gridOptions.rowSelection\" class=\"actionable\">\n                <input type=\"checkbox\" [(ngModel)]=\"row.isSelected\" (change)=\"rowSelectionChange($event, row)\"\n                  class=\"form-control-xs align-middle\">\n              </div>\n            </div>\n            <fsr-grid-row *ngIf=\"leftPinnedColumns.length\" [data]=\"row.data\" [isSelected]=\"row.isSelected\"\n              [ngClass]=\"{'fsr-row-selected' : row.isSelected}\" [isExpanded]=\"row.isExpanded\"\n              [columns]=\"leftPinnedColumns\" [rowSelection]=\"_gridOptions.rowSelection\"\n              [expandableDetail]=\"expandableDetail\" [expandable]=\"_gridOptions.rowExpandable\"\n              (onRowClicked)=\"onRowClicked($event)\">\n            </fsr-grid-row>\n          </div>\n          <div *ngIf=\"expandableDetail && expandableDetail.template && row.isExpanded\" class=\"row-expandable-wrapper\"\n            [style.height.px]=\"expandableDetail.expandableHeight!\">\n            <ng-template *ngIf=\"expandableDetail && expandableDetail.template\"\n              [ngTemplateOutlet]=\"expandableDetail.template\"\n              [ngTemplateOutletContext]=\"{data: row.data, expanded: row.isExpanded}\">\n            </ng-template>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- Viewport container -->\n    <div class=\"fsr-viewport-container\">\n      <div class=\"fsr-header-row\">\n        <fsr-grid-column *ngFor=\"let column of viewPortColumns\" fsrResizable fsrDraggable\n        [ngStyle]=\"{'width': column.$$width +'px'}\"\n        [colDef]=\"column\"\n        [draggable]=\"column.draggable!\"\n        [dragColumn]=\"column\"\n        [resizable]=\"column.resizable!\"\n        (onResize)=\"onWidthResize($event, column)\"\n        (onResizeEnd)=\"onWidthResizeEnd($event, column)\"\n        (columnFilterChanged)=\"onColumnFilterChanged($event)\"\n        (columnSortChanged)=\"columnSortChanged($event)\"\n        (columnDragStart)=\"columnDragStart($event)\"\n        (columnDragging)=\"columnDragging($event)\"\n        (columnDragEnd)=\"columnDragEnd($event)\">\n        </fsr-grid-column>\n      </div>\n      <div class=\"fsr-viewport-rows\">\n        <div *ngFor=\"let row of _rows\">\n          <div class=\"fsr-viewport-row-data\">\n            <fsr-grid-row [data]=\"row.data\" [isSelected]=\"row.isSelected\" [isExpanded]=\"row.isExpanded\"\n              [ngClass]=\"{'fsr-row-selected' : row.isSelected}\" [columns]=\"viewPortColumns\"\n              [rowSelection]=\"_gridOptions.rowSelection\" [expandableDetail]=\"expandableDetail\"\n              [expandable]=\"_gridOptions.rowExpandable\" (onRowClicked)=\"onRowClicked($event)\">\n            </fsr-grid-row>\n          </div>\n          <div *ngIf=\"expandableDetail && expandableDetail.template && row.isExpanded\" class=\"row-expandable-wrapper\"\n            [style.height.px]=\"expandableDetail.expandableHeight!\">\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- Right pinned container -->\n    <div class=\"fsr-right-pinned-container\">\n      <div class=\"fsr-header-row\">\n        <fsr-grid-column *ngFor=\"let column of rightPinnedColumns\" [colDef]=\"column\" fsrResizable\n          [resizable]=\"column.resizable!\" (onResize)=\"onWidthResize($event, column)\"\n          (onResizeEnd)=\"onWidthResizeEnd($event, column)\" [ngStyle]=\"{'width': column.$$width +'px'}\"\n          (columnFilterChanged)=\"onColumnFilterChanged($event)\" (columnSortChanged)=\"columnSortChanged($event)\">\n        </fsr-grid-column>\n      </div>\n      <div class=\"fsr-viewport-rows\">\n        <div *ngFor=\"let row of _rows\">\n          <div class=\"fsr-viewport-row-data\">\n            <fsr-grid-row [data]=\"row.data\" [isSelected]=\"row.isSelected\" [isExpanded]=\"row.isExpanded\"\n              [ngClass]=\"{'fsr-row-selected' : row.isSelected}\" [columns]=\"rightPinnedColumns\"\n              [rowSelection]=\"_gridOptions.rowSelection\" [expandableDetail]=\"expandableDetail\"\n              [expandable]=\"_gridOptions.rowExpandable\" (onRowClicked)=\"onRowClicked($event)\"\n              (columnFilterChanged)=\"onColumnFilterChanged($event)\">\n            </fsr-grid-row>\n          </div>\n          <div *ngIf=\"expandableDetail && expandableDetail.template && row.isExpanded\" class=\"row-expandable-wrapper\"\n            [style.height.px]=\"expandableDetail.expandableHeight!\">\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"fsr-shimmer-wrapper\" *ngIf=\"_columnDefs.length > 0 && loadingData\">\n    <div class=\"fsr-shimmer-row\" *ngFor=\"let row of [1,2,3,4,5]\" [ngClass]=\"_gridOptions.rowExpandable && _gridOptions.rowSelection ? 'ps-60' :  _gridOptions.rowExpandable || _gridOptions.rowSelection ? 'ps-30' : ''\">\n      <div class=\"fsr-shimmer-row-cells\">\n        <div class=\"fsr-shimmer-row-cell\" *ngFor=\"let column of leftPinnedColumns\"\n          [ngStyle]=\"{'width': column.$$width +'px'}\">\n          <div class=\"bg-shimmer content\"></div>\n        </div>\n      </div>\n\n      <div class=\"fsr-shimmer-row-cells\">\n        <div class=\"fsr-shimmer-row-cell\" *ngFor=\"let column of viewPortColumns\"\n          [ngStyle]=\"{'width': column.$$width +'px'}\">\n          <div class=\"bg-shimmer content\"></div>\n        </div>\n      </div>\n\n      <div class=\"fsr-shimmer-row-cells\">\n        <div class=\"fsr-shimmer-row-cell\" *ngFor=\"let column of rightPinnedColumns\"\n          [ngStyle]=\"{'width': column.$$width +'px'}\">\n          <div class=\"bg-shimmer content\"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n", styles: [".fsr-grid-wrapper{width:100%;overflow:hidden;position:relative}.fsr-grid-wrapper .fsr-grid-body-wrapper{display:flex;display:-ms-flexbox;flex-direction:row}.fsr-grid-wrapper .fsr-grid-body-wrapper .fsr-header-rows-action-container,.fsr-grid-wrapper .fsr-grid-body-wrapper .fsr-viewport-rows-action-container{display:flex;display:-ms-flexbox;flex-direction:row;align-items:center;align-content:center}.fsr-grid-wrapper .fsr-grid-body-wrapper .fsr-header-rows-action-container .actionable,.fsr-grid-wrapper .fsr-grid-body-wrapper .fsr-viewport-rows-action-container .actionable{width:30px;text-align:center;cursor:pointer}.fsr-grid-wrapper .fsr-header-row{background:var(--grid-header-background-color);display:inline-flex;display:-ms-inline-flexbox;align-items:center;height:70px;flex-direction:row;border-color:var(--grid-row-border-color);margin-bottom:3px}.fsr-grid-wrapper .fsr-header-row fsr-grid-column{display:flex;padding:5px 10px;flex-direction:column;position:relative;height:60px;overflow:hidden;font-size:.8em;border-color:var(--grid-row-border-color)}.fsr-grid-wrapper .fsr-header-row fsr-grid-column.dragging{z-index:2;background:var(--grid-header-background-color);cursor:move}.fsr-grid-wrapper .fsr-viewport-container{overflow-x:auto;overflow-y:hidden}.fsr-grid-wrapper .fsr-viewport-rows{flex-direction:column}.fsr-grid-wrapper .fsr-viewport-rows .fsr-viewport-row-data{display:flex;display:-ms-flexbox;margin-bottom:3px;height:40px;background:var(--grid-row-even-background-color)}.fsr-grid-wrapper .fsr-viewport-rows fsr-grid-row{height:40px;flex-direction:row;display:flex;display:-ms-flexbox;flex:0 0 auto;background:var(--grid-row-even-background-color)}.fsr-grid-wrapper .fsr-viewport-rows fsr-grid-row.fsr-row-selected{background:#f9f9f9}.fsr-grid-wrapper .fsr-shimmer-wrapper{overflow-x:auto}.fsr-grid-wrapper .fsr-shimmer-wrapper .fsr-shimmer-row{height:40px;display:flex;display:-webkit-flex;flex-direction:row;align-items:center;margin-bottom:5px;background:var(--grid-row-even-background-color)}.fsr-grid-wrapper .fsr-shimmer-wrapper .fsr-shimmer-row .fsr-shimmer-row-cells{flex-direction:row;display:flex;display:-ms-flexbox}.fsr-grid-wrapper .fsr-shimmer-wrapper .fsr-shimmer-row .fsr-shimmer-row-cells .fsr-shimmer-row-cell{padding:0 10px}.fsr-grid-wrapper .fsr-shimmer-wrapper .fsr-shimmer-row .fsr-shimmer-row-cells .fsr-shimmer-row-cell .bg-shimmer{height:10px}.fsr-grid-wrapper .ps-30{padding-left:30px}.fsr-grid-wrapper .ps-60{padding-left:60px}\n"], dependencies: [{ kind: "directive", type: i2.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i2.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i2.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "directive", type: i2.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }, { kind: "directive", type: i3.CheckboxControlValueAccessor, selector: "input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]" }, { kind: "directive", type: i3.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i3.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "component", type: i4.GridColumnComponent, selector: "fsr-grid-column", inputs: ["colDef"], outputs: ["columnFilterChanged", "columnSortChanged"] }, { kind: "component", type: i5.GridRowComponent, selector: "fsr-grid-row", inputs: ["columns", "expandable", "data", "rowSelection", "isSelected", "expandableDetail", "isExpanded"], outputs: ["rowSelectionChange", "onRowClicked", "onRowExpandCollapse"] }, { kind: "directive", type: i6.ResizableDirective, selector: "[fsrResizable]", inputs: ["resizable"], outputs: ["onResize", "onResizeEnd"] }, { kind: "directive", type: i7.DraggableDirective, selector: "[fsrDraggable]", inputs: ["dragColumn", "draggable"], outputs: ["columnDragStart", "columnDragging", "columnDragEnd"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.2.11", ngImport: i0, type: FsrDataGridComponent, decorators: [{
            type: Component,
            args: [{ selector: 'fsr-data-grid', template: "<div class=\"fsr-grid-wrapper\">\n  <div class=\"fsr-grid-body-wrapper\" *ngIf=\"_columnDefs.length > 0\">\n    <!-- Left pinned container -->\n    <div class=\"fsr-left-pinned-container\">\n      <div class=\"fsr-header-row\">\n        <div class=\"fsr-header-rows-action-container\" *ngIf=\"_gridOptions.rowExpandable || _gridOptions.rowSelection\">\n          <div *ngIf=\"_gridOptions.rowExpandable\" (click)=\"expandCollapseAllRows()\" class=\"actionable\">\n            <i class=\"fa fa-light {{ expandAllRows ? 'fa-chevron-down' : 'fa-chevron-right'}} font-size-12px\"></i>\n          </div>\n          <div *ngIf=\"_gridOptions.rowSelection\" class=\"actionable\">\n            <input type=\"checkbox\" [(ngModel)]=\"selectAllRows\" (change)=\"selectAll($event)\"\n              class=\"form-control-xs align-middle\">\n          </div>\n        </div>\n        <fsr-grid-column *ngFor=\"let column of leftPinnedColumns\" [colDef]=\"column\" fsrResizable\n          [ngStyle]=\"{'width': column.$$width +'px'}\" [resizable]=\"column.resizable!\"\n          (onResize)=\"onWidthResize($event, column)\" (onResizeEnd)=\"onWidthResizeEnd($event, column)\"\n          (columnFilterChanged)=\"onColumnFilterChanged($event)\" (columnSortChanged)=\"columnSortChanged($event)\">\n        </fsr-grid-column>\n      </div>\n      <div class=\"fsr-viewport-rows\">\n        <div *ngFor=\"let row of _rows\">\n          <div class=\"fsr-viewport-row-data\">\n            <div class=\"fsr-viewport-rows-action-container\"  *ngIf=\"_gridOptions.rowExpandable || _gridOptions.rowSelection\">\n              <div *ngIf=\"_gridOptions.rowExpandable\" class=\"actionable\" (click)=\"onRowExpandCollapse(row)\">\n                <i class=\"fa fa-light {{ row.isExpanded ? 'fa-chevron-down' : 'fa-chevron-right'}} font-size-12px\"></i>\n              </div>\n              <div *ngIf=\"_gridOptions.rowSelection\" class=\"actionable\">\n                <input type=\"checkbox\" [(ngModel)]=\"row.isSelected\" (change)=\"rowSelectionChange($event, row)\"\n                  class=\"form-control-xs align-middle\">\n              </div>\n            </div>\n            <fsr-grid-row *ngIf=\"leftPinnedColumns.length\" [data]=\"row.data\" [isSelected]=\"row.isSelected\"\n              [ngClass]=\"{'fsr-row-selected' : row.isSelected}\" [isExpanded]=\"row.isExpanded\"\n              [columns]=\"leftPinnedColumns\" [rowSelection]=\"_gridOptions.rowSelection\"\n              [expandableDetail]=\"expandableDetail\" [expandable]=\"_gridOptions.rowExpandable\"\n              (onRowClicked)=\"onRowClicked($event)\">\n            </fsr-grid-row>\n          </div>\n          <div *ngIf=\"expandableDetail && expandableDetail.template && row.isExpanded\" class=\"row-expandable-wrapper\"\n            [style.height.px]=\"expandableDetail.expandableHeight!\">\n            <ng-template *ngIf=\"expandableDetail && expandableDetail.template\"\n              [ngTemplateOutlet]=\"expandableDetail.template\"\n              [ngTemplateOutletContext]=\"{data: row.data, expanded: row.isExpanded}\">\n            </ng-template>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- Viewport container -->\n    <div class=\"fsr-viewport-container\">\n      <div class=\"fsr-header-row\">\n        <fsr-grid-column *ngFor=\"let column of viewPortColumns\" fsrResizable fsrDraggable\n        [ngStyle]=\"{'width': column.$$width +'px'}\"\n        [colDef]=\"column\"\n        [draggable]=\"column.draggable!\"\n        [dragColumn]=\"column\"\n        [resizable]=\"column.resizable!\"\n        (onResize)=\"onWidthResize($event, column)\"\n        (onResizeEnd)=\"onWidthResizeEnd($event, column)\"\n        (columnFilterChanged)=\"onColumnFilterChanged($event)\"\n        (columnSortChanged)=\"columnSortChanged($event)\"\n        (columnDragStart)=\"columnDragStart($event)\"\n        (columnDragging)=\"columnDragging($event)\"\n        (columnDragEnd)=\"columnDragEnd($event)\">\n        </fsr-grid-column>\n      </div>\n      <div class=\"fsr-viewport-rows\">\n        <div *ngFor=\"let row of _rows\">\n          <div class=\"fsr-viewport-row-data\">\n            <fsr-grid-row [data]=\"row.data\" [isSelected]=\"row.isSelected\" [isExpanded]=\"row.isExpanded\"\n              [ngClass]=\"{'fsr-row-selected' : row.isSelected}\" [columns]=\"viewPortColumns\"\n              [rowSelection]=\"_gridOptions.rowSelection\" [expandableDetail]=\"expandableDetail\"\n              [expandable]=\"_gridOptions.rowExpandable\" (onRowClicked)=\"onRowClicked($event)\">\n            </fsr-grid-row>\n          </div>\n          <div *ngIf=\"expandableDetail && expandableDetail.template && row.isExpanded\" class=\"row-expandable-wrapper\"\n            [style.height.px]=\"expandableDetail.expandableHeight!\">\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- Right pinned container -->\n    <div class=\"fsr-right-pinned-container\">\n      <div class=\"fsr-header-row\">\n        <fsr-grid-column *ngFor=\"let column of rightPinnedColumns\" [colDef]=\"column\" fsrResizable\n          [resizable]=\"column.resizable!\" (onResize)=\"onWidthResize($event, column)\"\n          (onResizeEnd)=\"onWidthResizeEnd($event, column)\" [ngStyle]=\"{'width': column.$$width +'px'}\"\n          (columnFilterChanged)=\"onColumnFilterChanged($event)\" (columnSortChanged)=\"columnSortChanged($event)\">\n        </fsr-grid-column>\n      </div>\n      <div class=\"fsr-viewport-rows\">\n        <div *ngFor=\"let row of _rows\">\n          <div class=\"fsr-viewport-row-data\">\n            <fsr-grid-row [data]=\"row.data\" [isSelected]=\"row.isSelected\" [isExpanded]=\"row.isExpanded\"\n              [ngClass]=\"{'fsr-row-selected' : row.isSelected}\" [columns]=\"rightPinnedColumns\"\n              [rowSelection]=\"_gridOptions.rowSelection\" [expandableDetail]=\"expandableDetail\"\n              [expandable]=\"_gridOptions.rowExpandable\" (onRowClicked)=\"onRowClicked($event)\"\n              (columnFilterChanged)=\"onColumnFilterChanged($event)\">\n            </fsr-grid-row>\n          </div>\n          <div *ngIf=\"expandableDetail && expandableDetail.template && row.isExpanded\" class=\"row-expandable-wrapper\"\n            [style.height.px]=\"expandableDetail.expandableHeight!\">\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"fsr-shimmer-wrapper\" *ngIf=\"_columnDefs.length > 0 && loadingData\">\n    <div class=\"fsr-shimmer-row\" *ngFor=\"let row of [1,2,3,4,5]\" [ngClass]=\"_gridOptions.rowExpandable && _gridOptions.rowSelection ? 'ps-60' :  _gridOptions.rowExpandable || _gridOptions.rowSelection ? 'ps-30' : ''\">\n      <div class=\"fsr-shimmer-row-cells\">\n        <div class=\"fsr-shimmer-row-cell\" *ngFor=\"let column of leftPinnedColumns\"\n          [ngStyle]=\"{'width': column.$$width +'px'}\">\n          <div class=\"bg-shimmer content\"></div>\n        </div>\n      </div>\n\n      <div class=\"fsr-shimmer-row-cells\">\n        <div class=\"fsr-shimmer-row-cell\" *ngFor=\"let column of viewPortColumns\"\n          [ngStyle]=\"{'width': column.$$width +'px'}\">\n          <div class=\"bg-shimmer content\"></div>\n        </div>\n      </div>\n\n      <div class=\"fsr-shimmer-row-cells\">\n        <div class=\"fsr-shimmer-row-cell\" *ngFor=\"let column of rightPinnedColumns\"\n          [ngStyle]=\"{'width': column.$$width +'px'}\">\n          <div class=\"bg-shimmer content\"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n", styles: [".fsr-grid-wrapper{width:100%;overflow:hidden;position:relative}.fsr-grid-wrapper .fsr-grid-body-wrapper{display:flex;display:-ms-flexbox;flex-direction:row}.fsr-grid-wrapper .fsr-grid-body-wrapper .fsr-header-rows-action-container,.fsr-grid-wrapper .fsr-grid-body-wrapper .fsr-viewport-rows-action-container{display:flex;display:-ms-flexbox;flex-direction:row;align-items:center;align-content:center}.fsr-grid-wrapper .fsr-grid-body-wrapper .fsr-header-rows-action-container .actionable,.fsr-grid-wrapper .fsr-grid-body-wrapper .fsr-viewport-rows-action-container .actionable{width:30px;text-align:center;cursor:pointer}.fsr-grid-wrapper .fsr-header-row{background:var(--grid-header-background-color);display:inline-flex;display:-ms-inline-flexbox;align-items:center;height:70px;flex-direction:row;border-color:var(--grid-row-border-color);margin-bottom:3px}.fsr-grid-wrapper .fsr-header-row fsr-grid-column{display:flex;padding:5px 10px;flex-direction:column;position:relative;height:60px;overflow:hidden;font-size:.8em;border-color:var(--grid-row-border-color)}.fsr-grid-wrapper .fsr-header-row fsr-grid-column.dragging{z-index:2;background:var(--grid-header-background-color);cursor:move}.fsr-grid-wrapper .fsr-viewport-container{overflow-x:auto;overflow-y:hidden}.fsr-grid-wrapper .fsr-viewport-rows{flex-direction:column}.fsr-grid-wrapper .fsr-viewport-rows .fsr-viewport-row-data{display:flex;display:-ms-flexbox;margin-bottom:3px;height:40px;background:var(--grid-row-even-background-color)}.fsr-grid-wrapper .fsr-viewport-rows fsr-grid-row{height:40px;flex-direction:row;display:flex;display:-ms-flexbox;flex:0 0 auto;background:var(--grid-row-even-background-color)}.fsr-grid-wrapper .fsr-viewport-rows fsr-grid-row.fsr-row-selected{background:#f9f9f9}.fsr-grid-wrapper .fsr-shimmer-wrapper{overflow-x:auto}.fsr-grid-wrapper .fsr-shimmer-wrapper .fsr-shimmer-row{height:40px;display:flex;display:-webkit-flex;flex-direction:row;align-items:center;margin-bottom:5px;background:var(--grid-row-even-background-color)}.fsr-grid-wrapper .fsr-shimmer-wrapper .fsr-shimmer-row .fsr-shimmer-row-cells{flex-direction:row;display:flex;display:-ms-flexbox}.fsr-grid-wrapper .fsr-shimmer-wrapper .fsr-shimmer-row .fsr-shimmer-row-cells .fsr-shimmer-row-cell{padding:0 10px}.fsr-grid-wrapper .fsr-shimmer-wrapper .fsr-shimmer-row .fsr-shimmer-row-cells .fsr-shimmer-row-cell .bg-shimmer{height:10px}.fsr-grid-wrapper .ps-30{padding-left:30px}.fsr-grid-wrapper .ps-60{padding-left:60px}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i1.FsrDataGridService }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [DOCUMENT]
                }] }]; }, propDecorators: { ColumnDefs: [{
                type: Input
            }], data: [{
                type: Input
            }], gridOptions: [{
                type: Input
            }], onGridReady: [{
                type: Output
            }], onRowClick: [{
                type: Output
            }], selectAllRowsChanged: [{
                type: Output
            }], rowSelectionChanged: [{
                type: Output
            }], columnResized: [{
                type: Output
            }], columnResizeEnd: [{
                type: Output
            }], rowExpandableEvent: [{
                type: Output
            }], filterChanged: [{
                type: Output
            }], sortChanged: [{
                type: Output
            }], columnReorder: [{
                type: Output
            }], columnTemplates: [{
                type: ContentChildren,
                args: [GridColumnDirective]
            }], gridColumns: [{
                type: ViewChildren,
                args: [GridColumnComponent]
            }], draggables: [{
                type: ContentChildren,
                args: [DraggableDirective, { descendants: true }]
            }], expandableDetail: [{
                type: ContentChild,
                args: [RowExpandableDirective]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnNyLWRhdGEtZ3JpZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9mc3ItZGF0YS1ncmlkL3NyYy9saWIvZnNyLWRhdGEtZ3JpZC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9wcm9qZWN0cy9mc3ItZGF0YS1ncmlkL3NyYy9saWIvZnNyLWRhdGEtZ3JpZC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDM0MsT0FBTyxFQUFpQixTQUFTLEVBQUUsWUFBWSxFQUFFLGVBQWUsRUFBYyxZQUFZLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBVSxNQUFNLEVBQWEsWUFBWSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzFLLE9BQU8sS0FBSyxDQUFDLE1BQU0sUUFBUSxDQUFDO0FBQzVCLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBQ3RFLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBRXpFLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLHVDQUF1QyxDQUFDO0FBRS9FLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHFDQUFxQyxDQUFDOzs7Ozs7Ozs7QUFJMUUsTUFBTSxzQkFBc0IsR0FBRyxFQUFFLENBQUM7QUFDbEMsTUFBTSxrQkFBa0IsR0FBRyxFQUFFLENBQUM7QUFNOUIsTUFBTSxPQUFPLG9CQUFvQjtJQTJEL0IsWUFBWSxPQUFtQixFQUFVLGtCQUFzQyxFQUE2QixRQUFhO1FBQWhGLHVCQUFrQixHQUFsQixrQkFBa0IsQ0FBb0I7UUFBNkIsYUFBUSxHQUFSLFFBQVEsQ0FBSztRQTlDekgsb0JBQW9CO1FBQ1YsZ0JBQVcsR0FBRyxJQUFJLFlBQVksRUFBb0IsQ0FBQztRQUNuRCxlQUFVLEdBQUcsSUFBSSxZQUFZLEVBQW1CLENBQUM7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QkFBbUIsNkNBUW5CLGtCQUFrQixnRkFGckIsbUJBQW1CLGdEQ3ZFbkMsbTNPQXNJQTs0RkRuSGEsb0JBQW9CO2tCQUxoQyxTQUFTOytCQUNFLGVBQWU7OzBCQStEMEQsTUFBTTsyQkFBQyxRQUFROzRDQTFEckYsVUFBVTtzQkFBdEIsS0FBSztnQkFJTyxJQUFJO3NCQUFoQixLQUFLO2dCQUdPLFdBQVc7c0JBQXZCLEtBQUs7Z0JBTUksV0FBVztzQkFBcEIsTUFBTTtnQkFDRyxVQUFVO3NCQUFuQixNQUFNO2dCQUNHLG9CQUFvQjtzQkFBN0IsTUFBTTtnQkFDRyxtQkFBbUI7c0JBQTVCLE1BQU07Z0JBQ0csYUFBYTtzQkFBdEIsTUFBTTtnQkFDRyxlQUFlO3NCQUF4QixNQUFNO2dCQUNHLGtCQUFrQjtzQkFBM0IsTUFBTTtnQkFDRyxhQUFhO3NCQUF0QixNQUFNO2dCQUNHLFdBQVc7c0JBQXBCLE1BQU07Z0JBQ0csYUFBYTtzQkFBdEIsTUFBTTtnQkF3QkgsZUFBZTtzQkFEbEIsZUFBZTt1QkFBQyxtQkFBbUI7Z0JBTUQsV0FBVztzQkFBN0MsWUFBWTt1QkFBQyxtQkFBbUI7Z0JBR2pDLFVBQVU7c0JBRFQsZUFBZTt1QkFBQyxrQkFBa0IsRUFBRSxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUU7Z0JBR3BCLGdCQUFnQjtzQkFBckQsWUFBWTt1QkFBQyxzQkFBc0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBET0NVTUVOVCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBBZnRlclZpZXdJbml0LCBDb21wb25lbnQsIENvbnRlbnRDaGlsZCwgQ29udGVudENoaWxkcmVuLCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIEluamVjdCwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0LCBRdWVyeUxpc3QsIFZpZXdDaGlsZHJlbiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgRHJhZ2dhYmxlRGlyZWN0aXZlIH0gZnJvbSAnLi9kaXJlY3RpdmVzL2RyYWdnYWJsZS5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgR3JpZENvbHVtbkRpcmVjdGl2ZSB9IGZyb20gJy4vZGlyZWN0aXZlcy9ncmlkLWNvbHVtbi5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgUm93RXhwYW5kYWJsZVRlbXBsYXRlRGlyZWN0aXZlIH0gZnJvbSAnLi9kaXJlY3RpdmVzL3Jvdy1leHBhbmRhYmxlLXRlbXBsYXRlLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBSb3dFeHBhbmRhYmxlRGlyZWN0aXZlIH0gZnJvbSAnLi9kaXJlY3RpdmVzL3Jvdy1leHBhbmRhYmxlLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBGc3JEYXRhR3JpZFNlcnZpY2UgfSBmcm9tICcuL2Zzci1kYXRhLWdyaWQuc2VydmljZSc7XG5pbXBvcnQgeyBHcmlkQ29sdW1uQ29tcG9uZW50IH0gZnJvbSAnLi9ncmlkLWNvbHVtbi9ncmlkLWNvbHVtbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgRnNyQ29sdW1uRGVmIH0gZnJvbSAnLi9pbnRlcmZhY2VzL2Zzci1jb2x1bW4nO1xuaW1wb3J0IHsgRnNyR3JpZE9wdGlvbnMgfSBmcm9tICcuL2ludGVyZmFjZXMvZnNyLWdyaWQtb3B0aW9uJztcbmltcG9ydCB7IGNvbHVtbkRyYWdFdmVudCwgY29sdW1uUmVvcmRlckV2ZW50LCBjb2x1bW5WaXNpYmlsaXR5RXZlbnQsIGZpbHRlckNoYW5nZWRFdmVudCwgZnNyQ29sdW1uUmVzaXplRXZlbnQsIG9uR3JpZFJlYWR5RXZlbnQsIG9uUm93Q2xpY2tFdmVudCwgcm93RXhwYW5kYWJsZUV2ZW50LCByb3dTZWxlY3Rpb25DaGFuZ2VkRXZlbnQsIHNlbGVjdEFsbFJvd3NDaGFuZ2VFdmVudCwgc29ydENoYW5nZWRFdmVudCB9IGZyb20gJy4vaW50ZXJmYWNlcy9ncmlkLWV2ZW50cyc7XG5jb25zdCBjaGVja2JveFNlbGVjdGlvbldpZHRoID0gMzA7XG5jb25zdCByb3dFeHBhbmRhYmxlV2lkdGggPSAzMDtcbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2Zzci1kYXRhLWdyaWQnLFxuICB0ZW1wbGF0ZVVybDogJy4vZnNyLWRhdGEtZ3JpZC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2Zzci1kYXRhLWdyaWQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIEZzckRhdGFHcmlkQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcbiAgQElucHV0KCkgc2V0IENvbHVtbkRlZnMoZGVmczogRnNyQ29sdW1uRGVmW10pIHtcbiAgICB0aGlzLl9jb2x1bW5EZWZzID0gZGVmcztcbiAgICB0aGlzLnNldEdyaWRDb2x1bW5zKCk7XG4gIH1cbiAgQElucHV0KCkgc2V0IGRhdGEoX2RhdGE6IGFueVtdKSB7XG4gICAgdGhpcy5zZXRHcmlkUm93cyhfZGF0YSk7XG4gIH1cbiAgQElucHV0KCkgc2V0IGdyaWRPcHRpb25zKGdyaWRPcHRpb25zOiBGc3JHcmlkT3B0aW9ucykge1xuICAgIF8uZXh0ZW5kKHRoaXMuX2dyaWRPcHRpb25zLCBncmlkT3B0aW9ucyk7XG4gIH1cblxuXG4gIC8vIEFsbCBvdXRwdXQgZXZlbnRzXG4gIEBPdXRwdXQoKSBvbkdyaWRSZWFkeSA9IG5ldyBFdmVudEVtaXR0ZXI8b25HcmlkUmVhZHlFdmVudD4oKTtcbiAgQE91dHB1dCgpIG9uUm93Q2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyPG9uUm93Q2xpY2tFdmVudD4oKTtcbiAgQE91dHB1dCgpIHNlbGVjdEFsbFJvd3NDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcjxzZWxlY3RBbGxSb3dzQ2hhbmdlRXZlbnQ+KCk7XG4gIEBPdXRwdXQoKSByb3dTZWxlY3Rpb25DaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcjxyb3dTZWxlY3Rpb25DaGFuZ2VkRXZlbnQ+KCk7XG4gIEBPdXRwdXQoKSBjb2x1bW5SZXNpemVkID0gbmV3IEV2ZW50RW1pdHRlcjxmc3JDb2x1bW5SZXNpemVFdmVudD4oKTtcbiAgQE91dHB1dCgpIGNvbHVtblJlc2l6ZUVuZCA9IG5ldyBFdmVudEVtaXR0ZXI8ZnNyQ29sdW1uUmVzaXplRXZlbnQ+KCk7XG4gIEBPdXRwdXQoKSByb3dFeHBhbmRhYmxlRXZlbnQgPSBuZXcgRXZlbnRFbWl0dGVyPHJvd0V4cGFuZGFibGVFdmVudD4oKTtcbiAgQE91dHB1dCgpIGZpbHRlckNoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyPGZpbHRlckNoYW5nZWRFdmVudD4oKTtcbiAgQE91dHB1dCgpIHNvcnRDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcjxzb3J0Q2hhbmdlZEV2ZW50PigpO1xuICBAT3V0cHV0KCkgY29sdW1uUmVvcmRlciA9IG5ldyBFdmVudEVtaXR0ZXI8Y29sdW1uUmVvcmRlckV2ZW50PigpO1xuXG4gIF9ncmlkT3B0aW9uczogRnNyR3JpZE9wdGlvbnMgPSB7XG4gICAgcm93U2VsZWN0aW9uOiB0cnVlLFxuICAgIHJvd0V4cGFuZGFibGU6IGZhbHNlXG4gIH07XG5cbiAgX3Jvd3M6IGFueSA9IFtdO1xuICBfY29sdW1uVGVtcGxhdGVzITogUXVlcnlMaXN0PEdyaWRDb2x1bW5EaXJlY3RpdmU+O1xuICBfY29sdW1uRGVmczogRnNyQ29sdW1uRGVmW10gPSBbXTtcbiAgdmlzaWJsZUNvbHVtbnM6IEZzckNvbHVtbkRlZltdID0gW107XG4gIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICBzZWxlY3RBbGxSb3dzOiBib29sZWFuID0gZmFsc2U7XG4gIGV4cGFuZEFsbFJvd3M6IGJvb2xlYW4gPSBmYWxzZTtcbiAgbGVmdFBpbm5lZENvbHVtbnM6IEZzckNvbHVtbkRlZltdID0gW107XG4gIHJpZ2h0UGlubmVkQ29sdW1uczogRnNyQ29sdW1uRGVmW10gPSBbXTtcbiAgdmlld1BvcnRDb2x1bW5zOiBGc3JDb2x1bW5EZWZbXSA9IFtdO1xuICB2aWV3UG9ydDogYW55ID0ge307XG4gIGxvYWRpbmdEYXRhOiBib29sZWFuID0gdHJ1ZTtcbiAgZHJhZ0V2ZW50VGFyZ2V0OiBhbnk7XG4gIHBvc2l0aW9uczphbnkgPSB7fTtcbiAgcHJpdmF0ZSBkcmFnZ2FibGVDb2x1bW5zT3JkZXI6IHN0cmluZ1tdID0gW11cblxuICBAQ29udGVudENoaWxkcmVuKEdyaWRDb2x1bW5EaXJlY3RpdmUpXG4gIHNldCBjb2x1bW5UZW1wbGF0ZXModGVtcGxhdGVzOiBRdWVyeUxpc3Q8R3JpZENvbHVtbkRpcmVjdGl2ZT4pIHtcbiAgICB0aGlzLl9jb2x1bW5UZW1wbGF0ZXMgPSB0ZW1wbGF0ZXM7XG4gICAgdGhpcy50cmFuc2xhdGVUb0NvbHVtbnModGVtcGxhdGVzKTtcbiAgfVxuXG4gIEBWaWV3Q2hpbGRyZW4oR3JpZENvbHVtbkNvbXBvbmVudCkgZ3JpZENvbHVtbnMhOiBRdWVyeUxpc3Q8R3JpZENvbHVtbkNvbXBvbmVudD47XG5cbiAgQENvbnRlbnRDaGlsZHJlbihEcmFnZ2FibGVEaXJlY3RpdmUsIHsgZGVzY2VuZGFudHM6IHRydWUgfSlcbiAgZHJhZ2dhYmxlcyE6IFF1ZXJ5TGlzdDxEcmFnZ2FibGVEaXJlY3RpdmU+O1xuXG4gIEBDb250ZW50Q2hpbGQoUm93RXhwYW5kYWJsZURpcmVjdGl2ZSkgZXhwYW5kYWJsZURldGFpbD86IFJvd0V4cGFuZGFibGVUZW1wbGF0ZURpcmVjdGl2ZTtcblxuICBjb25zdHJ1Y3RvcihlbGVtZW50OiBFbGVtZW50UmVmLCBwcml2YXRlIGZzckRhdGFHcmlkU2VydmljZTogRnNyRGF0YUdyaWRTZXJ2aWNlLCAgQEluamVjdChET0NVTUVOVCkgcHJpdmF0ZSBkb2N1bWVudDogYW55KSB7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudC5uYXRpdmVFbGVtZW50O1xuICB9XG4gIG5nQWZ0ZXJWaWV3SW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLmNhbGN1bGF0ZUNvbHVtbnNXaWR0aCgpO1xuICB9XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5vbkdyaWRSZWFkeS5lbWl0KHtcbiAgICAgIGFwaTogdGhpc1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRHcmlkUm93cyhkYXRhOiBhbnlbXSkge1xuICAgIHRoaXMuX3Jvd3MgPSBbXTtcbiAgICBkYXRhLmZvckVhY2goKGQ6IGFueSkgPT4ge1xuICAgICAgdGhpcy5fcm93cy5wdXNoKHtcbiAgICAgICAgZGF0YTogZCxcbiAgICAgICAgaXNTZWxlY3RlZDogZmFsc2UsXG4gICAgICAgIGlzRXhwYW5kZWQ6IGZhbHNlXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0R3JpZENvbHVtbnMoKSB7XG4gICAgdGhpcy52aXNpYmxlQ29sdW1ucyA9IHRoaXMuX2NvbHVtbkRlZnMuZmlsdGVyKChjb2x1bW46IEZzckNvbHVtbkRlZikgPT4ge1xuICAgICAgcmV0dXJuIGNvbHVtbi52aXNpYmxlO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jYWxjdWxhdGVDb2x1bW5zV2lkdGgoKTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlQ29sdW1uc1dpZHRoKCkge1xuICAgIGxldCB2aWV3cG9ydFdpZHRoID0gdGhpcy52aWV3UG9ydC53aWR0aDtcbiAgICBpZiAodGhpcy5fZ3JpZE9wdGlvbnMucm93U2VsZWN0aW9uKSB7XG4gICAgICB2aWV3cG9ydFdpZHRoIC09IGNoZWNrYm94U2VsZWN0aW9uV2lkdGg7XG4gICAgfVxuICAgIGlmICh0aGlzLl9ncmlkT3B0aW9ucy5yb3dFeHBhbmRhYmxlKSB7XG4gICAgICB2aWV3cG9ydFdpZHRoIC09IHJvd0V4cGFuZGFibGVXaWR0aDtcbiAgICB9XG4gICAgdGhpcy52aXNpYmxlQ29sdW1ucy5mb3JFYWNoKChjb2x1bW46IEZzckNvbHVtbkRlZikgPT4ge1xuICAgICAgaWYgKCFjb2x1bW4uJCR3aWR0aCkge1xuICAgICAgICBjb2x1bW4uJCR3aWR0aCA9IHRoaXMuX2dldENvbHVtbldpZHRoKGNvbHVtbiwgdmlld3BvcnRXaWR0aCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5zZXBhcmF0ZUNvbHVtbnNCeVBpbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXBhcmF0ZUNvbHVtbnNCeVBpbigpIHtcbiAgICB0aGlzLmxlZnRQaW5uZWRDb2x1bW5zID0gdGhpcy52aXNpYmxlQ29sdW1ucy5maWx0ZXIoKGNvbHVtbjogRnNyQ29sdW1uRGVmKSA9PiB7XG4gICAgICByZXR1cm4gY29sdW1uLnBpbm5lZENvbHVtbiA9PT0gJ0xFRlQnO1xuICAgIH0pO1xuICAgIHRoaXMudmlld1BvcnRDb2x1bW5zID0gdGhpcy52aXNpYmxlQ29sdW1ucy5maWx0ZXIoKGNvbHVtbjogRnNyQ29sdW1uRGVmKSA9PiB7XG4gICAgICByZXR1cm4gY29sdW1uLnBpbm5lZENvbHVtbiAhPT0gJ1JJR0hUJyAmJiBjb2x1bW4ucGlubmVkQ29sdW1uICE9PSAnTEVGVCc7XG4gICAgfSk7XG4gICAgaWYodGhpcy5kcmFnZ2FibGVDb2x1bW5zT3JkZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLmRyYWdnYWJsZUNvbHVtbnNPcmRlciA9IHRoaXMudmlld1BvcnRDb2x1bW5zLm1hcCgoY29sOkZzckNvbHVtbkRlZik9PiBjb2wua2V5KTtcbiAgICB9XG4gICAgdGhpcy5vcmRlclZpZXdwb3J0Q29sdW1ucygpO1xuICAgIHRoaXMucmlnaHRQaW5uZWRDb2x1bW5zID0gdGhpcy52aXNpYmxlQ29sdW1ucy5maWx0ZXIoKGNvbHVtbjogRnNyQ29sdW1uRGVmKSA9PiB7XG4gICAgICByZXR1cm4gY29sdW1uLnBpbm5lZENvbHVtbiA9PT0gJ1JJR0hUJztcbiAgICB9KTtcblxuICAgIHRoaXMuY2FsY3VsYXRlVmlld3BvcnRXaWR0aCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBvcmRlclZpZXdwb3J0Q29sdW1ucygpIHtcbiAgICB0aGlzLnZpZXdQb3J0Q29sdW1ucy5zb3J0KChhLCBiKSA9PiB0aGlzLmRyYWdnYWJsZUNvbHVtbnNPcmRlci5pbmRleE9mKGEua2V5KSAtIHRoaXMuZHJhZ2dhYmxlQ29sdW1uc09yZGVyLmluZGV4T2YoYi5rZXkpKTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlVmlld3BvcnRXaWR0aCgpIHtcbiAgICB0aGlzLnZpZXdQb3J0ID0gdGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2Zzci1ncmlkLXdyYXBwZXInKVswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgfVxuXG4gIHByaXZhdGUgX2dldENvbHVtbldpZHRoKGNvbHVtbjogRnNyQ29sdW1uRGVmLCB2aWV3cG9ydFdpZHRoOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGxldCBfZGVmYXVsdENvbFdpZHRoID0gdmlld3BvcnRXaWR0aCAvIHRoaXMudmlzaWJsZUNvbHVtbnMubGVuZ3RoO1xuICAgIGxldCBjb2xXaWR0aDogbnVtYmVyID0gX2RlZmF1bHRDb2xXaWR0aDtcbiAgICBpZiAoY29sdW1uLndpZHRoKSB7XG4gICAgICBpZiAodHlwZW9mIChjb2x1bW4ud2lkdGgpID09PSAnc3RyaW5nJyAmJiBjb2x1bW4ud2lkdGguaW5kZXhPZignJScpICE9PSAtMSkge1xuICAgICAgICBjb2xXaWR0aCA9IHZpZXdwb3J0V2lkdGggKiAocGFyc2VGbG9hdChjb2x1bW4ud2lkdGgpIC8gMTAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbFdpZHRoID0gcGFyc2VJbnQoY29sdW1uLndpZHRoIGFzIHN0cmluZyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb2xXaWR0aDtcbiAgfVxuXG4gIHByaXZhdGUgdHJhbnNsYXRlVG9Db2x1bW5zKHRlbXBsYXRlczogUXVlcnlMaXN0PEdyaWRDb2x1bW5EaXJlY3RpdmU+KSB7XG4gICAgaWYgKHRlbXBsYXRlcykge1xuXG4gICAgfVxuICB9XG5cbiAgb25XaWR0aFJlc2l6ZShldmVudDogYW55LCBjb2x1bW46IEZzckNvbHVtbkRlZikge1xuICAgIGNvbHVtbi4kJHdpZHRoID0gZXZlbnQ7XG4gICAgdGhpcy5jb2x1bW5SZXNpemVkLmVtaXQoe1xuICAgICAgY29sdW1uOiBjb2x1bW5cbiAgICB9KTtcbiAgfVxuXG4gIG9uV2lkdGhSZXNpemVFbmQoZXZlbnQ6IGFueSwgY29sdW1uOiBGc3JDb2x1bW5EZWYpIHtcbiAgICBjb2x1bW4uJCR3aWR0aCA9IGV2ZW50O1xuICAgIHRoaXMuY29sdW1uUmVzaXplRW5kLmVtaXQoe1xuICAgICAgY29sdW1uOiBjb2x1bW5cbiAgICB9KTtcbiAgfVxuXG4gIG9uUm93Q2xpY2tlZChyb3dEYXRhOiBvblJvd0NsaWNrRXZlbnQpIHtcbiAgICB0aGlzLm9uUm93Q2xpY2suZW1pdChyb3dEYXRhKTtcbiAgfVxuXG4gIHNlbGVjdEFsbChldmVudDogYW55KSB7XG4gICAgaWYgKHRoaXMuc2VsZWN0QWxsUm93cykge1xuICAgICAgdGhpcy5fcm93cy5mb3JFYWNoKChyb3c6IGFueSkgPT4ge1xuICAgICAgICByb3cuaXNTZWxlY3RlZCA9IHRydWU7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcm93cy5mb3JFYWNoKChyb3c6IGFueSkgPT4ge1xuICAgICAgICByb3cuaXNTZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuc2VsZWN0QWxsUm93c0NoYW5nZWQuZW1pdCh7XG4gICAgICBzZWxlY3RlZDogdGhpcy5zZWxlY3RBbGxSb3dzLFxuICAgICAgZXZlbnQ6IGV2ZW50XG4gICAgfSk7XG4gIH1cblxuICBnZXRBbGxTZWxlY3RlZFJvd3MoKSB7XG4gICAgcmV0dXJuICh0aGlzLl9yb3dzLmZpbHRlcigocm93OiBhbnkpID0+IHtcbiAgICAgIHJldHVybiByb3cuaXNTZWxlY3RlZDtcbiAgICB9KSkubWFwKChyOmFueSkgPT4gci5kYXRhKTtcbiAgfVxuXG4gIGdldFZpc2libGVDb2x1bW5zKCkge1xuICAgIHJldHVybiBbLi4udGhpcy5sZWZ0UGlubmVkQ29sdW1ucywgLi4udGhpcy52aWV3UG9ydENvbHVtbnMsIC4uLnRoaXMucmlnaHRQaW5uZWRDb2x1bW5zXTtcbiAgfVxuXG4gIHNldENvbHVtblZpc2libGUoY29sdW1uczogY29sdW1uVmlzaWJpbGl0eUV2ZW50W10pIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBfaW5kZXggPSB0aGlzLl9jb2x1bW5EZWZzLmZpbmRJbmRleCgoY29sdW1uOiBGc3JDb2x1bW5EZWYpID0+IGNvbHVtbi5rZXkgPT09IGNvbHVtbnNbaV0uY29sdW1uKTtcbiAgICAgIGlmIChfaW5kZXggIT09IC0xKSB7XG4gICAgICAgIHRoaXMuX2NvbHVtbkRlZnNbX2luZGV4XS52aXNpYmxlID0gY29sdW1uc1tpXS52aXNpYmlsaXR5O1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnNldEdyaWRDb2x1bW5zKCk7XG4gIH1cblxuICBleHBhbmRDb2xsYXBzZUFsbFJvd3MoKSB7XG4gICAgdGhpcy5leHBhbmRBbGxSb3dzID0gIXRoaXMuZXhwYW5kQWxsUm93cztcbiAgICB0aGlzLl9yb3dzLmZvckVhY2goKHJvdzogYW55KSA9PiB7XG4gICAgICByb3cuaXNFeHBhbmRlZCA9IHRoaXMuZXhwYW5kQWxsUm93cztcbiAgICB9KTtcbiAgICB0aGlzLnJvd0V4cGFuZGFibGVFdmVudC5lbWl0KHtcbiAgICAgIGV4cGFuZFR5cGU6ICdBTEwnLFxuICAgICAgZXhwYW5kZWQ6IHRoaXMuZXhwYW5kQWxsUm93cyxcbiAgICAgIGRhdGE6IHRoaXMuX3Jvd3NcbiAgICB9KTtcbiAgfVxuXG4gIG9uUm93RXhwYW5kQ29sbGFwc2Uocm93OiBhbnkpIHtcbiAgICByb3cuaXNFeHBhbmRlZCA9ICFyb3cuaXNFeHBhbmRlZDtcbiAgICB0aGlzLnJvd0V4cGFuZGFibGVFdmVudC5lbWl0KHtcbiAgICAgIGV4cGFuZFR5cGU6ICdTSU5HTEUnLFxuICAgICAgZXhwYW5kZWQ6IHJvdy5pc0V4cGFuZGVkLFxuICAgICAgZGF0YTogcm93LmRhdGFcbiAgICB9KTtcbiAgfVxuXG4gIHJvd1NlbGVjdGlvbkNoYW5nZShldmVudDogYW55LCByb3c6IGFueSkge1xuICAgIHRoaXMucm93U2VsZWN0aW9uQ2hhbmdlZC5lbWl0KHtcbiAgICAgIGRhdGE6IHJvdy5kYXRhLFxuICAgICAgZXZlbnQ6IGV2ZW50LFxuICAgICAgc2VsZWN0ZWQ6IHJvdy5pc1NlbGVjdGVkXG4gICAgfSk7XG4gIH1cblxuICBvbkNvbHVtbkZpbHRlckNoYW5nZWQoZXZlbnQ6IGFueSkge1xuICAgIHRoaXMuZmlsdGVyQ2hhbmdlZC5lbWl0KGV2ZW50KTtcbiAgfVxuXG4gIGdldEZpbHRlcmVkQ29sdW1ucygpIHtcbiAgICBsZXQgZmlsdGVyczogZmlsdGVyQ2hhbmdlZEV2ZW50W10gPSBbXTtcbiAgICBpZiAodGhpcy5ncmlkQ29sdW1ucykge1xuICAgICAgdGhpcy5ncmlkQ29sdW1ucyEudG9BcnJheSgpLmZvckVhY2goKGNvbHVtbjogR3JpZENvbHVtbkNvbXBvbmVudCkgPT4ge1xuICAgICAgICBjb25zdCBmaWx0ZXJEYXRhID0gY29sdW1uLmdldEZpbHRlclZhbHVlKCk7XG4gICAgICAgIGlmIChmaWx0ZXJEYXRhLnZhbHVlKSB7XG4gICAgICAgICAgZmlsdGVycy5wdXNoKGZpbHRlckRhdGEpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGZpbHRlcnM7XG4gIH1cblxuICBnZXRTb3J0ZWRDb2x1bW5zKCkge1xuICAgIGxldCBmaWx0ZXJzOiBzb3J0Q2hhbmdlZEV2ZW50W10gPSBbXTtcbiAgICBpZiAodGhpcy5ncmlkQ29sdW1ucykge1xuICAgICAgdGhpcy5ncmlkQ29sdW1ucyEudG9BcnJheSgpLmZvckVhY2goKGNvbHVtbjogR3JpZENvbHVtbkNvbXBvbmVudCkgPT4ge1xuICAgICAgICBjb25zdCBmaWx0ZXJEYXRhID0gY29sdW1uLmdldFNvcnRTdGF0dXMoKTtcbiAgICAgICAgaWYgKGZpbHRlckRhdGEpIHtcbiAgICAgICAgICBmaWx0ZXJzLnB1c2goZmlsdGVyRGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZmlsdGVycztcbiAgfVxuXG4gIGNvbHVtblNvcnRDaGFuZ2VkKCRldmVudDogc29ydENoYW5nZWRFdmVudCkge1xuICAgIHRoaXMuc29ydENoYW5nZWQuZW1pdCgkZXZlbnQpO1xuICB9XG5cbiAgc2V0R3JpZERhdGEoZGF0YTphbnlbXSkge1xuICAgIHRoaXMuc2V0R3JpZFJvd3MoZGF0YSk7XG4gICAgdGhpcy5sb2FkaW5nRGF0YSA9IGZhbHNlO1xuICB9XG5cbiAgY29sdW1uRHJhZ1N0YXJ0KGV2ZW50OmNvbHVtbkRyYWdFdmVudCkge1xuICAgIHRoaXMucG9zaXRpb25zID0ge307XG5cbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yIChjb25zdCBjb2x1bW4gb2YgdGhpcy5ncmlkQ29sdW1ucy50b0FycmF5KCkpIHtcbiAgICAgIGNvbnN0IGVsbSA9IGNvbHVtbi5lbGVtZW50O1xuICAgICAgY29uc3QgbGVmdCA9IHBhcnNlSW50KGVsbS5vZmZzZXRMZWZ0LnRvU3RyaW5nKCksIDApO1xuICAgICAgdGhpcy5wb3NpdGlvbnNbY29sdW1uLmNvbERlZi5rZXldID0ge1xuICAgICAgICBsZWZ0LFxuICAgICAgICByaWdodDogbGVmdCArIHBhcnNlSW50KGVsbS5vZmZzZXRXaWR0aC50b1N0cmluZygpLCAwKSxcbiAgICAgICAgaW5kZXg6IGkrKyxcbiAgICAgICAgZWxlbWVudDogZWxtXG4gICAgICB9O1xuICAgIH1cblxuICB9XG4gIGNvbHVtbkRyYWdnaW5nKGV2ZW50OmNvbHVtbkRyYWdFdmVudCkge1xuICB9XG5cbiAgY29sdW1uRHJhZ0VuZChldmVudDpjb2x1bW5EcmFnRXZlbnQpIHtcbiAgICBjb25zdCBwcmV2UG9zID0gdGhpcy5wb3NpdGlvbnNbZXZlbnQuY29sdW1uLmtleV07XG4gICAgZXZlbnQuY29sdW1uLiQkZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICBjb25zdCB0YXJnZXQgPSB0aGlzLmlzVGFyZ2V0KGV2ZW50LmNvbHVtbiwgZXZlbnQuZXZlbnQpO1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIHRoaXMucmVvcmRlckNvbHVtbnMocHJldlBvcy5pbmRleCwgdGFyZ2V0LmkpO1xuICAgICAgdGhpcy5jb2x1bW5SZW9yZGVyLmVtaXQoe1xuICAgICAgICBjb2x1bW46IGV2ZW50LmNvbHVtbixcbiAgICAgICAgZXZlbnQ6IGV2ZW50LmV2ZW50LFxuICAgICAgICBuZXdQb3M6IHRhcmdldC5pLFxuICAgICAgICBwcmV2UG9zOiBwcmV2UG9zLmluZGV4XG4gICAgICB9KTtcbiAgICB9XG4gICAgZXZlbnQuZWxlbWVudC5zdHlsZS5sZWZ0ID0gJ2F1dG8nO1xuICB9XG5cbiAgcmVvcmRlckNvbHVtbnMocHJldkluZGV4Om51bWJlciwgbmV3SW5kZXg6bnVtYmVyKSB7XG4gICAgbGV0IGRyYWdDb2x1bW4gPSB0aGlzLmRyYWdnYWJsZUNvbHVtbnNPcmRlcltwcmV2SW5kZXhdO1xuICAgIHRoaXMuZHJhZ2dhYmxlQ29sdW1uc09yZGVyLnNwbGljZShwcmV2SW5kZXgsIDEpO1xuICAgIHRoaXMuZHJhZ2dhYmxlQ29sdW1uc09yZGVyLnNwbGljZShuZXdJbmRleCwgMCwgZHJhZ0NvbHVtbik7XG4gICAgdGhpcy5vcmRlclZpZXdwb3J0Q29sdW1ucygpO1xuXG4gIH1cblxuICBpc1RhcmdldChjb2x1bW46IEZzckNvbHVtbkRlZiwgZXZlbnQ6IE1vdXNlRXZlbnQpOiBhbnkge1xuICAgIGxldCBpID0gMDtcbiAgICBjb25zdCB4ID0gZXZlbnQueCB8fCBldmVudC5jbGllbnRYO1xuICAgIGNvbnN0IHkgPSBldmVudC55IHx8IGV2ZW50LmNsaWVudFk7XG4gICAgY29uc3QgdGFyZ2V0cyA9IHRoaXMuZG9jdW1lbnQuZWxlbWVudHNGcm9tUG9pbnQoeCwgeSk7XG5cbiAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLnBvc2l0aW9ucykge1xuICAgICAgY29uc3QgcG9zID0gdGhpcy5wb3NpdGlvbnNba2V5XTtcbiAgICAgIGlmIChjb2x1bW4ua2V5ICE9PSBrZXkgJiYgdGFyZ2V0cy5maW5kKChlbDogYW55KSA9PiBlbCA9PT0gcG9zLmVsZW1lbnQpKSB7XG4gICAgICAgIHJldHVybiB7IHBvcywgaSB9O1xuICAgICAgfVxuICAgICAgaSsrO1xuICAgIH1cbiAgfVxuXG4gIHJlc2V0Q29sdW1ucygpIHtcbiAgICB0aGlzLmRyYWdnYWJsZUNvbHVtbnNPcmRlciA9IFtdO1xuICB9XG5cblxuXG59XG4iLCI8ZGl2IGNsYXNzPVwiZnNyLWdyaWQtd3JhcHBlclwiPlxuICA8ZGl2IGNsYXNzPVwiZnNyLWdyaWQtYm9keS13cmFwcGVyXCIgKm5nSWY9XCJfY29sdW1uRGVmcy5sZW5ndGggPiAwXCI+XG4gICAgPCEtLSBMZWZ0IHBpbm5lZCBjb250YWluZXIgLS0+XG4gICAgPGRpdiBjbGFzcz1cImZzci1sZWZ0LXBpbm5lZC1jb250YWluZXJcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJmc3ItaGVhZGVyLXJvd1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZnNyLWhlYWRlci1yb3dzLWFjdGlvbi1jb250YWluZXJcIiAqbmdJZj1cIl9ncmlkT3B0aW9ucy5yb3dFeHBhbmRhYmxlIHx8IF9ncmlkT3B0aW9ucy5yb3dTZWxlY3Rpb25cIj5cbiAgICAgICAgICA8ZGl2ICpuZ0lmPVwiX2dyaWRPcHRpb25zLnJvd0V4cGFuZGFibGVcIiAoY2xpY2spPVwiZXhwYW5kQ29sbGFwc2VBbGxSb3dzKClcIiBjbGFzcz1cImFjdGlvbmFibGVcIj5cbiAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtbGlnaHQge3sgZXhwYW5kQWxsUm93cyA/ICdmYS1jaGV2cm9uLWRvd24nIDogJ2ZhLWNoZXZyb24tcmlnaHQnfX0gZm9udC1zaXplLTEycHhcIj48L2k+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiAqbmdJZj1cIl9ncmlkT3B0aW9ucy5yb3dTZWxlY3Rpb25cIiBjbGFzcz1cImFjdGlvbmFibGVcIj5cbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBbKG5nTW9kZWwpXT1cInNlbGVjdEFsbFJvd3NcIiAoY2hhbmdlKT1cInNlbGVjdEFsbCgkZXZlbnQpXCJcbiAgICAgICAgICAgICAgY2xhc3M9XCJmb3JtLWNvbnRyb2wteHMgYWxpZ24tbWlkZGxlXCI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZnNyLWdyaWQtY29sdW1uICpuZ0Zvcj1cImxldCBjb2x1bW4gb2YgbGVmdFBpbm5lZENvbHVtbnNcIiBbY29sRGVmXT1cImNvbHVtblwiIGZzclJlc2l6YWJsZVxuICAgICAgICAgIFtuZ1N0eWxlXT1cInsnd2lkdGgnOiBjb2x1bW4uJCR3aWR0aCArJ3B4J31cIiBbcmVzaXphYmxlXT1cImNvbHVtbi5yZXNpemFibGUhXCJcbiAgICAgICAgICAob25SZXNpemUpPVwib25XaWR0aFJlc2l6ZSgkZXZlbnQsIGNvbHVtbilcIiAob25SZXNpemVFbmQpPVwib25XaWR0aFJlc2l6ZUVuZCgkZXZlbnQsIGNvbHVtbilcIlxuICAgICAgICAgIChjb2x1bW5GaWx0ZXJDaGFuZ2VkKT1cIm9uQ29sdW1uRmlsdGVyQ2hhbmdlZCgkZXZlbnQpXCIgKGNvbHVtblNvcnRDaGFuZ2VkKT1cImNvbHVtblNvcnRDaGFuZ2VkKCRldmVudClcIj5cbiAgICAgICAgPC9mc3ItZ3JpZC1jb2x1bW4+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJmc3Itdmlld3BvcnQtcm93c1wiPlxuICAgICAgICA8ZGl2ICpuZ0Zvcj1cImxldCByb3cgb2YgX3Jvd3NcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZnNyLXZpZXdwb3J0LXJvdy1kYXRhXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZnNyLXZpZXdwb3J0LXJvd3MtYWN0aW9uLWNvbnRhaW5lclwiICAqbmdJZj1cIl9ncmlkT3B0aW9ucy5yb3dFeHBhbmRhYmxlIHx8IF9ncmlkT3B0aW9ucy5yb3dTZWxlY3Rpb25cIj5cbiAgICAgICAgICAgICAgPGRpdiAqbmdJZj1cIl9ncmlkT3B0aW9ucy5yb3dFeHBhbmRhYmxlXCIgY2xhc3M9XCJhY3Rpb25hYmxlXCIgKGNsaWNrKT1cIm9uUm93RXhwYW5kQ29sbGFwc2Uocm93KVwiPlxuICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtbGlnaHQge3sgcm93LmlzRXhwYW5kZWQgPyAnZmEtY2hldnJvbi1kb3duJyA6ICdmYS1jaGV2cm9uLXJpZ2h0J319IGZvbnQtc2l6ZS0xMnB4XCI+PC9pPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiAqbmdJZj1cIl9ncmlkT3B0aW9ucy5yb3dTZWxlY3Rpb25cIiBjbGFzcz1cImFjdGlvbmFibGVcIj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgWyhuZ01vZGVsKV09XCJyb3cuaXNTZWxlY3RlZFwiIChjaGFuZ2UpPVwicm93U2VsZWN0aW9uQ2hhbmdlKCRldmVudCwgcm93KVwiXG4gICAgICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbC14cyBhbGlnbi1taWRkbGVcIj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxmc3ItZ3JpZC1yb3cgKm5nSWY9XCJsZWZ0UGlubmVkQ29sdW1ucy5sZW5ndGhcIiBbZGF0YV09XCJyb3cuZGF0YVwiIFtpc1NlbGVjdGVkXT1cInJvdy5pc1NlbGVjdGVkXCJcbiAgICAgICAgICAgICAgW25nQ2xhc3NdPVwieydmc3Itcm93LXNlbGVjdGVkJyA6IHJvdy5pc1NlbGVjdGVkfVwiIFtpc0V4cGFuZGVkXT1cInJvdy5pc0V4cGFuZGVkXCJcbiAgICAgICAgICAgICAgW2NvbHVtbnNdPVwibGVmdFBpbm5lZENvbHVtbnNcIiBbcm93U2VsZWN0aW9uXT1cIl9ncmlkT3B0aW9ucy5yb3dTZWxlY3Rpb25cIlxuICAgICAgICAgICAgICBbZXhwYW5kYWJsZURldGFpbF09XCJleHBhbmRhYmxlRGV0YWlsXCIgW2V4cGFuZGFibGVdPVwiX2dyaWRPcHRpb25zLnJvd0V4cGFuZGFibGVcIlxuICAgICAgICAgICAgICAob25Sb3dDbGlja2VkKT1cIm9uUm93Q2xpY2tlZCgkZXZlbnQpXCI+XG4gICAgICAgICAgICA8L2Zzci1ncmlkLXJvdz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2ICpuZ0lmPVwiZXhwYW5kYWJsZURldGFpbCAmJiBleHBhbmRhYmxlRGV0YWlsLnRlbXBsYXRlICYmIHJvdy5pc0V4cGFuZGVkXCIgY2xhc3M9XCJyb3ctZXhwYW5kYWJsZS13cmFwcGVyXCJcbiAgICAgICAgICAgIFtzdHlsZS5oZWlnaHQucHhdPVwiZXhwYW5kYWJsZURldGFpbC5leHBhbmRhYmxlSGVpZ2h0IVwiPlxuICAgICAgICAgICAgPG5nLXRlbXBsYXRlICpuZ0lmPVwiZXhwYW5kYWJsZURldGFpbCAmJiBleHBhbmRhYmxlRGV0YWlsLnRlbXBsYXRlXCJcbiAgICAgICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRdPVwiZXhwYW5kYWJsZURldGFpbC50ZW1wbGF0ZVwiXG4gICAgICAgICAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7ZGF0YTogcm93LmRhdGEsIGV4cGFuZGVkOiByb3cuaXNFeHBhbmRlZH1cIj5cbiAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPCEtLSBWaWV3cG9ydCBjb250YWluZXIgLS0+XG4gICAgPGRpdiBjbGFzcz1cImZzci12aWV3cG9ydC1jb250YWluZXJcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJmc3ItaGVhZGVyLXJvd1wiPlxuICAgICAgICA8ZnNyLWdyaWQtY29sdW1uICpuZ0Zvcj1cImxldCBjb2x1bW4gb2Ygdmlld1BvcnRDb2x1bW5zXCIgZnNyUmVzaXphYmxlIGZzckRyYWdnYWJsZVxuICAgICAgICBbbmdTdHlsZV09XCJ7J3dpZHRoJzogY29sdW1uLiQkd2lkdGggKydweCd9XCJcbiAgICAgICAgW2NvbERlZl09XCJjb2x1bW5cIlxuICAgICAgICBbZHJhZ2dhYmxlXT1cImNvbHVtbi5kcmFnZ2FibGUhXCJcbiAgICAgICAgW2RyYWdDb2x1bW5dPVwiY29sdW1uXCJcbiAgICAgICAgW3Jlc2l6YWJsZV09XCJjb2x1bW4ucmVzaXphYmxlIVwiXG4gICAgICAgIChvblJlc2l6ZSk9XCJvbldpZHRoUmVzaXplKCRldmVudCwgY29sdW1uKVwiXG4gICAgICAgIChvblJlc2l6ZUVuZCk9XCJvbldpZHRoUmVzaXplRW5kKCRldmVudCwgY29sdW1uKVwiXG4gICAgICAgIChjb2x1bW5GaWx0ZXJDaGFuZ2VkKT1cIm9uQ29sdW1uRmlsdGVyQ2hhbmdlZCgkZXZlbnQpXCJcbiAgICAgICAgKGNvbHVtblNvcnRDaGFuZ2VkKT1cImNvbHVtblNvcnRDaGFuZ2VkKCRldmVudClcIlxuICAgICAgICAoY29sdW1uRHJhZ1N0YXJ0KT1cImNvbHVtbkRyYWdTdGFydCgkZXZlbnQpXCJcbiAgICAgICAgKGNvbHVtbkRyYWdnaW5nKT1cImNvbHVtbkRyYWdnaW5nKCRldmVudClcIlxuICAgICAgICAoY29sdW1uRHJhZ0VuZCk9XCJjb2x1bW5EcmFnRW5kKCRldmVudClcIj5cbiAgICAgICAgPC9mc3ItZ3JpZC1jb2x1bW4+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJmc3Itdmlld3BvcnQtcm93c1wiPlxuICAgICAgICA8ZGl2ICpuZ0Zvcj1cImxldCByb3cgb2YgX3Jvd3NcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZnNyLXZpZXdwb3J0LXJvdy1kYXRhXCI+XG4gICAgICAgICAgICA8ZnNyLWdyaWQtcm93IFtkYXRhXT1cInJvdy5kYXRhXCIgW2lzU2VsZWN0ZWRdPVwicm93LmlzU2VsZWN0ZWRcIiBbaXNFeHBhbmRlZF09XCJyb3cuaXNFeHBhbmRlZFwiXG4gICAgICAgICAgICAgIFtuZ0NsYXNzXT1cInsnZnNyLXJvdy1zZWxlY3RlZCcgOiByb3cuaXNTZWxlY3RlZH1cIiBbY29sdW1uc109XCJ2aWV3UG9ydENvbHVtbnNcIlxuICAgICAgICAgICAgICBbcm93U2VsZWN0aW9uXT1cIl9ncmlkT3B0aW9ucy5yb3dTZWxlY3Rpb25cIiBbZXhwYW5kYWJsZURldGFpbF09XCJleHBhbmRhYmxlRGV0YWlsXCJcbiAgICAgICAgICAgICAgW2V4cGFuZGFibGVdPVwiX2dyaWRPcHRpb25zLnJvd0V4cGFuZGFibGVcIiAob25Sb3dDbGlja2VkKT1cIm9uUm93Q2xpY2tlZCgkZXZlbnQpXCI+XG4gICAgICAgICAgICA8L2Zzci1ncmlkLXJvdz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2ICpuZ0lmPVwiZXhwYW5kYWJsZURldGFpbCAmJiBleHBhbmRhYmxlRGV0YWlsLnRlbXBsYXRlICYmIHJvdy5pc0V4cGFuZGVkXCIgY2xhc3M9XCJyb3ctZXhwYW5kYWJsZS13cmFwcGVyXCJcbiAgICAgICAgICAgIFtzdHlsZS5oZWlnaHQucHhdPVwiZXhwYW5kYWJsZURldGFpbC5leHBhbmRhYmxlSGVpZ2h0IVwiPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDwhLS0gUmlnaHQgcGlubmVkIGNvbnRhaW5lciAtLT5cbiAgICA8ZGl2IGNsYXNzPVwiZnNyLXJpZ2h0LXBpbm5lZC1jb250YWluZXJcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJmc3ItaGVhZGVyLXJvd1wiPlxuICAgICAgICA8ZnNyLWdyaWQtY29sdW1uICpuZ0Zvcj1cImxldCBjb2x1bW4gb2YgcmlnaHRQaW5uZWRDb2x1bW5zXCIgW2NvbERlZl09XCJjb2x1bW5cIiBmc3JSZXNpemFibGVcbiAgICAgICAgICBbcmVzaXphYmxlXT1cImNvbHVtbi5yZXNpemFibGUhXCIgKG9uUmVzaXplKT1cIm9uV2lkdGhSZXNpemUoJGV2ZW50LCBjb2x1bW4pXCJcbiAgICAgICAgICAob25SZXNpemVFbmQpPVwib25XaWR0aFJlc2l6ZUVuZCgkZXZlbnQsIGNvbHVtbilcIiBbbmdTdHlsZV09XCJ7J3dpZHRoJzogY29sdW1uLiQkd2lkdGggKydweCd9XCJcbiAgICAgICAgICAoY29sdW1uRmlsdGVyQ2hhbmdlZCk9XCJvbkNvbHVtbkZpbHRlckNoYW5nZWQoJGV2ZW50KVwiIChjb2x1bW5Tb3J0Q2hhbmdlZCk9XCJjb2x1bW5Tb3J0Q2hhbmdlZCgkZXZlbnQpXCI+XG4gICAgICAgIDwvZnNyLWdyaWQtY29sdW1uPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiZnNyLXZpZXdwb3J0LXJvd3NcIj5cbiAgICAgICAgPGRpdiAqbmdGb3I9XCJsZXQgcm93IG9mIF9yb3dzXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZzci12aWV3cG9ydC1yb3ctZGF0YVwiPlxuICAgICAgICAgICAgPGZzci1ncmlkLXJvdyBbZGF0YV09XCJyb3cuZGF0YVwiIFtpc1NlbGVjdGVkXT1cInJvdy5pc1NlbGVjdGVkXCIgW2lzRXhwYW5kZWRdPVwicm93LmlzRXhwYW5kZWRcIlxuICAgICAgICAgICAgICBbbmdDbGFzc109XCJ7J2Zzci1yb3ctc2VsZWN0ZWQnIDogcm93LmlzU2VsZWN0ZWR9XCIgW2NvbHVtbnNdPVwicmlnaHRQaW5uZWRDb2x1bW5zXCJcbiAgICAgICAgICAgICAgW3Jvd1NlbGVjdGlvbl09XCJfZ3JpZE9wdGlvbnMucm93U2VsZWN0aW9uXCIgW2V4cGFuZGFibGVEZXRhaWxdPVwiZXhwYW5kYWJsZURldGFpbFwiXG4gICAgICAgICAgICAgIFtleHBhbmRhYmxlXT1cIl9ncmlkT3B0aW9ucy5yb3dFeHBhbmRhYmxlXCIgKG9uUm93Q2xpY2tlZCk9XCJvblJvd0NsaWNrZWQoJGV2ZW50KVwiXG4gICAgICAgICAgICAgIChjb2x1bW5GaWx0ZXJDaGFuZ2VkKT1cIm9uQ29sdW1uRmlsdGVyQ2hhbmdlZCgkZXZlbnQpXCI+XG4gICAgICAgICAgICA8L2Zzci1ncmlkLXJvdz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2ICpuZ0lmPVwiZXhwYW5kYWJsZURldGFpbCAmJiBleHBhbmRhYmxlRGV0YWlsLnRlbXBsYXRlICYmIHJvdy5pc0V4cGFuZGVkXCIgY2xhc3M9XCJyb3ctZXhwYW5kYWJsZS13cmFwcGVyXCJcbiAgICAgICAgICAgIFtzdHlsZS5oZWlnaHQucHhdPVwiZXhwYW5kYWJsZURldGFpbC5leHBhbmRhYmxlSGVpZ2h0IVwiPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cblxuICA8ZGl2IGNsYXNzPVwiZnNyLXNoaW1tZXItd3JhcHBlclwiICpuZ0lmPVwiX2NvbHVtbkRlZnMubGVuZ3RoID4gMCAmJiBsb2FkaW5nRGF0YVwiPlxuICAgIDxkaXYgY2xhc3M9XCJmc3Itc2hpbW1lci1yb3dcIiAqbmdGb3I9XCJsZXQgcm93IG9mIFsxLDIsMyw0LDVdXCIgW25nQ2xhc3NdPVwiX2dyaWRPcHRpb25zLnJvd0V4cGFuZGFibGUgJiYgX2dyaWRPcHRpb25zLnJvd1NlbGVjdGlvbiA/ICdwcy02MCcgOiAgX2dyaWRPcHRpb25zLnJvd0V4cGFuZGFibGUgfHwgX2dyaWRPcHRpb25zLnJvd1NlbGVjdGlvbiA/ICdwcy0zMCcgOiAnJ1wiPlxuICAgICAgPGRpdiBjbGFzcz1cImZzci1zaGltbWVyLXJvdy1jZWxsc1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZnNyLXNoaW1tZXItcm93LWNlbGxcIiAqbmdGb3I9XCJsZXQgY29sdW1uIG9mIGxlZnRQaW5uZWRDb2x1bW5zXCJcbiAgICAgICAgICBbbmdTdHlsZV09XCJ7J3dpZHRoJzogY29sdW1uLiQkd2lkdGggKydweCd9XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImJnLXNoaW1tZXIgY29udGVudFwiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzPVwiZnNyLXNoaW1tZXItcm93LWNlbGxzXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJmc3Itc2hpbW1lci1yb3ctY2VsbFwiICpuZ0Zvcj1cImxldCBjb2x1bW4gb2Ygdmlld1BvcnRDb2x1bW5zXCJcbiAgICAgICAgICBbbmdTdHlsZV09XCJ7J3dpZHRoJzogY29sdW1uLiQkd2lkdGggKydweCd9XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImJnLXNoaW1tZXIgY29udGVudFwiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzPVwiZnNyLXNoaW1tZXItcm93LWNlbGxzXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJmc3Itc2hpbW1lci1yb3ctY2VsbFwiICpuZ0Zvcj1cImxldCBjb2x1bW4gb2YgcmlnaHRQaW5uZWRDb2x1bW5zXCJcbiAgICAgICAgICBbbmdTdHlsZV09XCJ7J3dpZHRoJzogY29sdW1uLiQkd2lkdGggKydweCd9XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImJnLXNoaW1tZXIgY29udGVudFwiPjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuIl19